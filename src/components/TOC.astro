---
const { headings = [] } = Astro.props;

function indentClass(depth) {
  if (depth >= 3) return 'pl-6';
  if (depth >= 2) return 'pl-3';
  return 'pl-0';
}
---

{headings.length > 0 && (
  <aside class="glass sticky top-20 hidden max-h-[70vh] w-64 overflow-auto rounded-3xl p-4 lg:block">
    <div class="mb-3 text-xs font-semibold tracking-wide text-white/75">ON THIS PAGE</div>
    <nav class="space-y-1 text-sm">
      {headings
        .filter((h) => h.depth <= 3)
        .map((h) => (
          <a
            class={`block rounded-xl px-2 py-1 text-white/65 hover:bg-white/5 hover:text-white ${indentClass(
              h.depth
            )}`}
            href={`#${h.slug}`}
          >
            {h.text}
          </a>
        ))}
    </nav>
  </aside>
)}
